(this.webpackJsonpcliente=this.webpackJsonpcliente||[]).push([[0],{41:function(e,a,t){e.exports=t(74)},46:function(e,a,t){},47:function(e,a,t){},74:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),c=t(17),o=t.n(c),l=(t(46),t(47),t(15)),s=t(6),u=t(10),i=t(1),m=t(3),p=Object(r.createContext)(),d=Object(r.createContext)(),b=function(e){var a=Object(r.useContext)(p),t=a.alerta,c=a.mostrarAlerta,o=Object(r.useContext)(d),s=o.mensaje,b=o.autenticado,f=o.iniciarSesion;Object(r.useEffect)((function(){b&&e.history.push("/proyectos"),s&&c(s.msg,s.categoria)}),[s,b,e.history]);var E=Object(r.useState)({email:"",password:""}),O=Object(m.a)(E,2),y=O[0],g=O[1],v=y.email,h=y.password,R=function(e){g(Object(i.a)(Object(i.a)({},y),{},Object(u.a)({},e.target.name,e.target.value)))};return n.a.createElement("div",{className:"form-usuario"},t?n.a.createElement("div",{className:"alerta  ".concat(t.categoria)}," ",t.msg," "):null,n.a.createElement("div",{className:"contenedor-form  sombra-dark"},n.a.createElement("h1",{className:"title is-3"},"Iniciar Sesi\xf3n"),n.a.createElement("form",{onSubmit:function(e){e.preventDefault(),""!==v.trim()&&""!==h.trim()||c("Todos los campos son obligatorios","alerta-error"),f({email:v,password:h})}},n.a.createElement("div",{className:"campo-form"},n.a.createElement("label",{htmlFor:"email"},"Email"),n.a.createElement("input",{type:"email",id:"email",name:"email",value:v,placeholder:"Tu email",onChange:R})),n.a.createElement("div",{className:"campo-form"},n.a.createElement("label",{htmlFor:"password"},"Password"),n.a.createElement("input",{type:"password",id:"password",name:"password",placeholder:"Tu password",value:h,onChange:R})),n.a.createElement("div",{className:"campo-form"},n.a.createElement("input",{type:"submit",className:"btn  btn-primario btn-block",value:"Iniciar Sesi\xf3n   "}))),n.a.createElement(l.b,{to:"/nueva-cuenta",className:"enlace-cuenta"},"Obtener Cuenta")))},f=function(e){var a=Object(r.useContext)(p),t=a.alerta,c=a.mostrarAlerta,o=Object(r.useContext)(d),s=o.mensaje,b=o.autenticado,f=o.registrarUsuario;Object(r.useEffect)((function(){b&&e.history.push("/proyectos"),s&&c(s.msg,s.categoria)}),[s,b,e.history]);var E=Object(r.useState)({nombre:"",email:"",password:"",confirmar:""}),O=Object(m.a)(E,2),y=O[0],g=O[1],v=y.nombre,h=y.email,R=y.password,j=y.confirmar,N=function(e){g(Object(i.a)(Object(i.a)({},y),{},Object(u.a)({},e.target.name,e.target.value)))};return n.a.createElement("div",{className:"form-usuario"},t?n.a.createElement("div",{className:"alerta  ".concat(t.categoria)}," ",t.msg," "):null,n.a.createElement("div",{className:"contenedor-form  sombra-dark"},n.a.createElement("h1",null,"Nueva Cuenta"),n.a.createElement("form",{onSubmit:function(e){e.preventDefault(),""!==v.trim()&&""!==h.trim()&&""!==R.trim()&&""!==j.trim()?R.length<6?c("La contrase\xf1a debe ser m\xe1s fuerte","alerta-error"):R===j?f({nombre:v,email:h,password:R}):c("Las contrase\xf1as no son iguales","alerta-error"):c("Todos los campos son obligatorios","alerta-error")}},n.a.createElement("div",{className:"campo-form"},n.a.createElement("label",{htmlfor:"nombre"},"Nombre"),n.a.createElement("input",{type:"text",id:"nombre",name:"nombre",value:v,placeholder:"Tu nombre",onChange:N})),n.a.createElement("div",{className:"campo-form"},n.a.createElement("label",{htmlfor:"email"},"Email"),n.a.createElement("input",{type:"email",id:"email",name:"email",value:h,placeholder:"Tu email",onChange:N})),n.a.createElement("div",{className:"campo-form"},n.a.createElement("label",{htmlfor:"password"},"Password"),n.a.createElement("input",{type:"password",id:"password",name:"password",placeholder:"Tu password",value:R,onChange:N})),n.a.createElement("div",{className:"campo-form"},n.a.createElement("label",{htmlfor:"confirmar"},"Confirmar Password"),n.a.createElement("input",{type:"password",id:"confirmar",name:"confirmar",placeholder:"Repite tu contrase\xf1a",value:j,onChange:N})),n.a.createElement("div",{className:"campo-form"},n.a.createElement("input",{type:"submit",className:"btn  btn-primario btn-block",value:"Registrarme"}))),n.a.createElement(l.b,{to:"/",className:"enlace-cuenta"},"Iniciar Sesi\xf3n")))},E=t(2),O=t.n(E),y=t(8),g=t(16),v=t.n(g),h=Object(r.createContext)(),R=t(5),j=t.n(R),N=(t(20),function(){var e=Object(r.useContext)(d).usuario,a=Object(r.useContext)(h),t=a.proyectos,c=a.formulario,o=a.errorFormulario,l=a.mostrarFormulario,s=a.agregarProyecto,p=a.mostrarError,b=a.ocultarFormulario,f=Object(r.useState)({nombre:"",url:null,slug:null,file:null,cloudinary_public_id:null}),E=Object(m.a)(f,2),g=E[0],R=E[1],N=g.nombre,_=g.descripcion,A=Object(r.useState)({}),x=Object(m.a)(A,2),C=x[0],T=x[1],k=function(e){var a;R(Object(i.a)(Object(i.a)({},g),{},(a={},Object(u.a)(a,e.target.name,e.target.value),Object(u.a)(a,"slug",e.target.value.replace(" ","-").replace("/","-").toLowerCase()),a)))},w=function(){var e=Object(y.a)(O.a.mark((function e(a){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.target.files[0]&&(t={file:a.target.files[0]},T({file_aux:t}));case 1:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),S=function(){var e=Object(y.a)(O.a.mark((function e(a){var t,r,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),""!==N){e.next=6;break}return j.a.error("Tiene que tener un nombre."),P(),p(),e.abrupt("return");case 6:if(console.log("descripcion ",_),""!==_){e.next=12;break}return j.a.error("Tiene que tener una descripci\xf3n."),P(),p(),e.abrupt("return");case 12:if(void 0!==C.file_aux){e.next=17;break}return j.a.error("Tiene que tener un logo."),P(),p(),e.abrupt("return");case 17:return I(),t=C.file_aux.file,(r=new FormData).append("file",t),r.append("upload_preset","y9omye1p"),e.next=24,v.a.post("https://api.cloudinary.com/v1_1/rankea/image/upload ",r,{headers:{"content-type":"multipart/form-data"}});case 24:n=e.sent,g.url=n.data.secure_url,g.cloudinary_public_id=n.data.public_id,console.log("RESPUESTA CLAUDINARY",n.data),s(g),R({nombre:"",descripcion:""}),T({}),b();case 32:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),I=function(){j.a.success("Agregado!")},P=function(e){j.a.error("Error al crear el proyecto.")};return n.a.createElement(r.Fragment,null,n.a.createElement("button",{onClick:function(){j.a.success("Creando nuevo proyecto."),console.log("Tipo usuario ",e.tipo_usuario);var a=e.tipo_usuario,r=t.length;if("ronaldao@rankea.pe"!==e.email){if(1===a&&r+1>1)return j.a.error("No puedes agregar m\xe1s proyectos."),null;if(2===a&&r+1>1)return j.a.error("No puedes agregar m\xe1s proyectos."),null}l()},type:"button",className:"btn btn-block btn-primario"},"Nuevo Proyecto"),c?n.a.createElement("form",{className:"formulario-nuevo-proyecto",onSubmit:S},n.a.createElement("input",{className:"input-text",type:"text",placeholder:"Nombre del Proyecto",name:"nombre",value:N,onChange:k}),"\xa0",n.a.createElement("input",{className:"input-text",type:"text",placeholder:"Descripci\xf3n del Proyecto",name:"descripcion",value:_,onChange:k}),"\xa0",n.a.createElement("div",{className:"file  is-centered is-boxed is-orange has-name"},n.a.createElement("label",{className:"file-label"},n.a.createElement("input",{className:"file-input",type:"file",name:"file2",onChange:w}),n.a.createElement("span",{className:"file-cta"},n.a.createElement("span",{className:"file-icon"},n.a.createElement("i",{className:"fas fa-upload"})),n.a.createElement("span",{className:"file-label"},"Subir logo...")),n.a.createElement("span",{className:"file-name"},C.file_aux?n.a.createElement("p",null,C.file_aux.file.name.slice(0,18),"..."):n.a.createElement("p",null,"Nada seleccionado...")))),n.a.createElement("input",{type:"submit",className:"btn btn-primario btn-block",value:"Agregar Proyecto"})):null,n.a.createElement("br",null),o?n.a.createElement("p",{className:"subtitle is-6"},"Uno de los campos es incorrecto."):null)}),_=Object(r.createContext)(),A=t(26),x=function(e){var a=e.proyecto,t=Object(r.useContext)(h).proyectoActual,c=Object(r.useContext)(_).obtenerTareas,o=function(){j.a.success("Copiado!")};return n.a.createElement("li",null,a.url?n.a.createElement("center",null,n.a.createElement("img",Object(u.a)({src:function(e){var a=e.split("/");return"https://res.cloudinary.com/rankea/image/upload/w_100,h_100,c_pad,b_white/"+a[a.length-1]}(a.url),height:"100"},"height","width"))):null,n.a.createElement("a",{type:"button",className:"subtitle is-6",onClick:function(){return e=a._id,t(e),void c(e);var e}},n.a.createElement("h2",{className:""},n.a.createElement("i",{className:"fas fa-shopping-cart"})," ",n.a.createElement("u",null,a.nombre))),n.a.createElement("br",null),n.a.createElement(A.CopyToClipboard,{text:"https://WhatsCart.co/".concat(a.slug)},n.a.createElement("p",{className:"proyecto-slug",onClick:function(){o()}},n.a.createElement("i",{className:"fas fa-globe"}),"                    Whatscart.co/",a.slug)),n.a.createElement(A.CopyToClipboard,{text:"https://WhatsCart.co/".concat(a.slug)},n.a.createElement("p",{className:"proyecto-slug",onClick:function(){o()}},"(clic para copiar)")))},C=t(76),T=t(75),k=function(){var e=Object(r.useContext)(h),a=e.mensaje,t=e.proyectos,c=e.obtenerProyectos,o=Object(r.useContext)(p),l=o.alerta,s=o.mostrarAlerta;return Object(r.useEffect)((function(){console.log("MENSAJE ",a),a&&s(a.msg,a.categoria),c()}),[a]),0===t.lenght?null:n.a.createElement("ul",{className:"listado-proyectos"},l?n.a.createElement("div",{className:"alerta ".concat(l.categoria)},l.msg):null,n.a.createElement(C.a,null,t.map((function(e){return n.a.createElement(T.a,{key:e._id,timeout:400,classNames:"proyecto"},n.a.createElement(x,{proyecto:e}))}))))},w=function(){return n.a.createElement("aside",null,n.a.createElement("h1",{className:"title is-3"},"Whats",n.a.createElement("span",null,n.a.createElement("strong",null,"Cart"))),n.a.createElement(N,null),n.a.createElement("div",{className:"proyectos"},n.a.createElement("h2",{className:"title is-5"},"Tus proyectos"),n.a.createElement(k,null)))},S=function(){var e=Object(r.useContext)(d),a=e.usuarioAutenticado,t=e.usuario,c=e.cerrarSesion;return Object(r.useEffect)((function(){a()}),[]),n.a.createElement("header",{className:"app-header"},t?n.a.createElement("p",{className:"nombre-usuario"},"Hola ",n.a.createElement("span",null,t.nombre)):null,n.a.createElement("nav",{className:"nav-principal"},n.a.createElement("button",{className:"btn btn-blank cerrar-sesion",onClick:function(){return c()}},n.a.createElement("u",null,"Cerrar Sesi\xf3n"))))},I=function(){var e=Object(r.useContext)(d).usuario,a=Object(r.useContext)(h),t=a.proyecto,c=(a.proyectos,Object(r.useContext)(_)),o=c.tareaseleccionada,l=c.tareasproyecto,s=c.errortarea,p=c.agregarTarea,b=c.validarTarea,f=c.obtenerTareas,E=c.actualizarTarea,g=c.limpiarTarea,R=Object(r.useState)({}),N=Object(m.a)(R,2),A=N[0],x=N[1];Object(r.useEffect)((function(){w(null!==o?o:{nombre:"",precio:"",descripcion:"",file:null,url:null})}),[o]);var C=Object(r.useState)({nombre:"",descripcion:"",precio:null,file:null,url:null,categoria:null}),T=Object(m.a)(C,2),k=T[0],w=T[1],S=k.nombre,I=k.descripcion,P=k.precio,L=k.url,U=k.categoria;if(!t)return null;var D=Object(m.a)(t,1)[0],F=function(){var a=Object(y.a)(O.a.mark((function a(t){var r,n,c,s,u,i,m,d,y;return O.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t.preventDefault(),!(k.nombre.length>50)){a.next=4;break}return j.a.error("El Nombre tiene que m\xe1s corto."),a.abrupt("return");case 4:if(""!==S.trim()){a.next=7;break}return b(),a.abrupt("return");case 7:if(console.log(I.length),!(I.length>180)){a.next=11;break}return j.a.error("Descripci\xf3n tiene que m\xe1s corta."),a.abrupt("return");case 11:if(""!==I.trim()){a.next=14;break}return b(),a.abrupt("return");case 14:if(""!==P.trim()){a.next=18;break}return j.a.error("Introducir un precio valido."),b(),a.abrupt("return");case 18:if(null!==k.file){a.next=22;break}return j.a.error("A\xf1ada una foto."),b(),a.abrupt("return");case 22:if(null!==A.uploadfile){a.next=26;break}return j.a.error("A\xf1ada una foto."),b(),a.abrupt("return");case 26:if(r=e.tipo_usuario,n=l.length,"ronaldao@rankea.pe"===e.email){a.next=41;break}if(1!==r){a.next=33;break}if(!(n+1>26)){a.next=33;break}return j.a.error("No puedes agregar m\xe1s productos en tu plan."),a.abrupt("return",null);case 33:if(2!==r){a.next=37;break}if(!(n+1>51)){a.next=37;break}return j.a.error("No puedes agregar m\xe1s productos en tu plan."),a.abrupt("return",null);case 37:if(3!==r){a.next=41;break}if(!(n+1>101)){a.next=41;break}return j.a.error("No puedes agregar m\xe1s productos en tu plan."),a.abrupt("return",null);case 41:if(null!==o){a.next=58;break}return k.proyecto=D._id,c=A.uploadfile.file,(s=new FormData).append("file",c),s.append("upload_preset","y9omye1p"),a.next=49,v.a.post("https://api.cloudinary.com/v1_1/rankea/image/upload ",s,{headers:{"content-type":"multipart/form-data"}});case 49:return u=a.sent,k.url=u.data.secure_url,i=(Math.round(100*k.precio)/100).toFixed(2),k.precio=i,k.cloudinary_public_id=u.data.public_id,a.next=56,p(k);case 56:a.next=70;break;case 58:if(!A.uploadfile){a.next=68;break}return m=A.uploadfile.file,(d=new FormData).append("file",m),d.append("upload_preset","y9omye1p"),a.next=66,v.a.post("https://api.cloudinary.com/v1_1/rankea/image/upload ",d,{headers:{"content-type":"multipart/form-data"}});case 66:y=a.sent,k.url=y.data.secure_url;case 68:E(k),g();case 70:f(D._id),w({nombre:"",precio:"",descripcion:"",categoria:"",file:"",url:null}),A.uploadfile=null;case 73:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),Y=function(){var e=Object(y.a)(O.a.mark((function e(a){var t,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w(Object(i.a)(Object(i.a)({},k),{},Object(u.a)({},a.target.name,a.target.value))),a.target.files&&(t=a.target.files[0],console.log(t),r={file:t,loaded:0},console.log(r),x({uploadfile:r}));case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return n.a.createElement("div",{className:"form formulario"},n.a.createElement("form",{onSubmit:F},n.a.createElement("div",{className:"contenedor-input"},n.a.createElement("input",{type:"text",className:"input-text",placeholder:"Nombre",name:"nombre",onChange:Y,value:S})),n.a.createElement("br",null),n.a.createElement("div",{className:"contenedor-input"},n.a.createElement("input",{type:"number",className:"input-text",placeholder:"Precio",name:"precio",onChange:Y,value:P})),n.a.createElement("br",null),n.a.createElement("div",{className:"contenedor-input"},n.a.createElement("input",{type:"text",className:"input-text",placeholder:"Categor\xeda",name:"categoria",onChange:Y,value:U})),n.a.createElement("br",null),n.a.createElement("div",{className:"contenedor-input"},n.a.createElement("textarea",{type:"text",className:"input-text",placeholder:"Descripci\xf3n",name:"descripcion",onChange:Y,value:I})),n.a.createElement("br",null),n.a.createElement("div",{className:"file has-name "},n.a.createElement("label",{className:"file-label"},n.a.createElement("input",{className:"file-input",type:"file",name:"file",onChange:Y}),n.a.createElement("span",{className:"file-cta"},n.a.createElement("span",{className:"file-icon"},n.a.createElement("i",{className:"fas fa-upload"})),n.a.createElement("span",{className:"file-label"},"A\xf1adir una foto...")),n.a.createElement("span",{className:"file-name has-text-white"},A.uploadfile?A.uploadfile.file.name:L||"Seleccionar imagen"))),n.a.createElement("div",{className:"contenedor-input"},n.a.createElement("input",{type:"submit",className:"btn btn-primario btn-submit  btn-block",value:o?"Editar Item":"Agregar Item"}))),s?n.a.createElement("p",{className:"mensaje error"},"Uno de los campos es incorrecto o vac\xedo."):null)},P=function(e){var a=e.tarea,t=Object(r.useContext)(h).proyecto,c=Object(r.useContext)(_),o=c.eliminarTarea,l=c.obtenerTareas,s=c.actualizarTarea,u=c.guardarTareaActual,i=function(e){e.estado?e.estado=!1:e.estado=!0,s(e)},p=Object(m.a)(t,1)[0],d=function(e){var a=e.split("/");return"https://res.cloudinary.com/rankea/image/upload/w_300,h_250,c_pad,b_white/"+a[a.length-1]};return n.a.createElement(r.Fragment,null,n.a.createElement(r.Fragment,null,n.a.createElement("div",{className:"box"},n.a.createElement("article",{className:"columns"},n.a.createElement("div",{className:"column"},n.a.createElement("center",null,n.a.createElement("figure",{className:"image is-300x250"},n.a.createElement("img",{src:d(a.url),alt:"Image",width:"300",height:"250"})))),n.a.createElement("div",{className:"column"},n.a.createElement("div",{className:"content"},n.a.createElement("p",null,n.a.createElement("strong",null,a.nombre," "),n.a.createElement("br",null),a.descripcion,".",n.a.createElement("br",null),n.a.createElement("small",null,n.a.createElement("strong",null,"Precio: "),"S./",a.precio," PEN."),n.a.createElement("br",null),n.a.createElement("small",null,n.a.createElement("strong",null,"Categor\xeda: "),a.categoria,"."))),a.estado?n.a.createElement("button",{type:"button",className:"button is-success",onClick:function(){return i(a)}},"Disponible"):n.a.createElement("button",{type:"button",className:"button is-danger",onClick:function(){return i(a)}},"No Disponible"),n.a.createElement("button",{type:"button",className:"button is-warning",onClick:function(){!function(e){u(e)}(a)}},"Editar"),n.a.createElement("button",{type:"button",onClick:function(){return function(e){o(e,p._id),l(p._id);d(a.url)}(a._id)},className:"button is-danger"},"Eliminar"))))))},L=function(){var e=Object(r.useContext)(h),a=e.proyecto,t=e.eliminarProyecto,c=Object(r.useContext)(_).tareasproyecto;if(!a)return n.a.createElement("h2",{className:"title is-4"},"Selecciona un Proyecto");var o=Object(m.a)(a,1)[0];return n.a.createElement(r.Fragment,null,n.a.createElement("h2",{className:"title is-5"},"Proyecto: ",n.a.createElement("strong",null,o.nombre)),n.a.createElement("ul",{className:"listado-tareas"},0===c.length?n.a.createElement("li",{className:"tarea"},n.a.createElement("p",null,"No hay productos...")):n.a.createElement(C.a,null,c.map((function(e){return n.a.createElement(T.a,{key:e._id,timeout:400,classNames:"tarea"},n.a.createElement(P,{tarea:e}))})))),n.a.createElement("button",{className:"btn button is-danger",onClick:function(){j.a.error("Proyecto eliminado."),t(o._id,o.cloudinary_public_id)}},"Eliminar Proyecto \xd7"))},U=function(){var e=Object(r.useContext)(d).usuarioAutenticado;return Object(r.useEffect)((function(){e()}),[]),n.a.createElement("div",{className:"contenedor-app"},n.a.createElement(w,null),n.a.createElement("div",{className:"seccion-principal"},n.a.createElement(S,null),n.a.createElement("main",null,n.a.createElement(I,null),n.a.createElement("div",{className:"contenedor-tareas"},n.a.createElement(L,null)))))},D=t(22),F=function(e,a){switch(a.type){case"FORMULARIO_PROYECTO":return Object(i.a)(Object(i.a)({},e),{},{formulario:!0});case"OCULTAR_FORMULARIO":return Object(i.a)(Object(i.a)({},e),{},{formulario:!1});case"OBTENER_PROYECTOS":return Object(i.a)(Object(i.a)({},e),{},{proyectos:a.payload});case"AGREGAR_PROYECTO":return Object(i.a)(Object(i.a)({},e),{},{proyectos:[].concat(Object(D.a)(e.proyectos),[a.payload]),errorFormulario:!1});case"VALIDAR_FORMULARIO":return Object(i.a)(Object(i.a)({},e),{},{errorFormulario:!0});case"PROYECTO_ACTUAL":return Object(i.a)(Object(i.a)({},e),{},{proyecto:e.proyectos.filter((function(e){return e._id===a.payload}))});case"ELIMINAR_PROYECTO":return Object(i.a)(Object(i.a)({},e),{},{proyectos:e.proyectos.filter((function(e){return e._id!==a.payload})),proyecto:null});case"PROYECTO_ERROR":return console.log("PRYECTO ERROR",a.payload),Object(i.a)(Object(i.a)({},e),{},{mensaje:a.payload});default:return e}},Y=v.a.create({baseURL:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_BACKEND_URL}),G=function(e){var a=Object(r.useReducer)(F,{proyectos:[],formulario:!1,errorFormulario:!1,proyecto:null,mensaje:null}),t=Object(m.a)(a,2),c=t[0],o=t[1],l=function(){var e=Object(y.a)(O.a.mark((function e(){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y.get("/api/proyectos");case 3:a=e.sent,o({type:"OBTENER_PROYECTOS",payload:a.data.proyectos}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),o({type:"PROYECTO_ERROR",payload:{msg:"Hubo un error.",categoria:"alerta-error"}});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),s=function(){var e=Object(y.a)(O.a.mark((function e(a){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y.post("/api/proyectos",a);case 3:t=e.sent,o({type:"AGREGAR_PROYECTO",payload:t.data}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),o({type:"PROYECTO_ERROR",payload:{msg:"Hubo un error.",categoria:"alerta-error"}});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(a){return e.apply(this,arguments)}}(),u=function(){var e=Object(y.a)(O.a.mark((function e(a){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y.delete("/api/proyectos/".concat(a));case 3:o({type:"ELIMINAR_PROYECTO",payload:a}),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),o({type:"PROYECTO_ERROR",payload:{msg:"Hubo un error.",categoria:"alerta-error"}});case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(a){return e.apply(this,arguments)}}();return n.a.createElement(h.Provider,{value:{proyectos:c.proyectos,formulario:c.formulario,errorFormulario:c.errorFormulario,proyecto:c.proyecto,mensaje:c.mensaje,obtenerProyectos:l,mostrarFormulario:function(){o({type:"FORMULARIO_PROYECTO"})},agregarProyecto:s,mostrarError:function(){o({type:"VALIDAR_FORMULARIO"})},proyectoActual:function(e){o({type:"PROYECTO_ACTUAL",payload:e})},eliminarProyecto:u,ocultarFormulario:function(){o({type:"OCULTAR_FORMULARIO"})}}},e.children)},M=function(e,a){switch(a.type){case"TAREAS_PROYECTO":return Object(i.a)(Object(i.a)({},e),{},{tareasproyecto:a.payload});case"AGREGAR_TAREA":return console.log("PAYLOAD ",a.payload),Object(i.a)(Object(i.a)({},e),{},{tareasproyecto:[].concat(Object(D.a)(e.tareasproyecto),[a.payload]),errortarea:!1});case"VALIDAR_TAREA":return Object(i.a)(Object(i.a)({},e),{},{errortarea:!0});case"ELIMINAR_TAREA":return Object(i.a)(Object(i.a)({},e),{},{tareasproyecto:e.tareasproyecto.filter((function(e){return e._id!==a.payload}))});case"ACTUALIZAR_TAREA":return Object(i.a)(Object(i.a)({},e),{},{tareasproyecto:e.tareasproyecto.map((function(e){return e._id===a.payload._id?a.payload:e}))});case"TAREA_ACTUAL":return Object(i.a)(Object(i.a)({},e),{},{tareaseleccionada:a.payload});case"LIMPIAR_TAREA":return Object(i.a)(Object(i.a)({},e),{},{tareaseleccionada:null});default:return e}},W=function(e){var a=Object(r.useReducer)(M,{tareasproyecto:[],errortarea:!1,tareaseleccionada:null}),t=Object(m.a)(a,2),c=t[0],o=t[1],l=function(){var e=Object(y.a)(O.a.mark((function e(a){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("obtener tareas",a),e.prev=1,e.next=4,Y.get("/api/tareas",{params:{proyecto:a}});case 4:t=e.sent,console.log(t),o({type:"TAREAS_PROYECTO",payload:t.data.tareas}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(a){return e.apply(this,arguments)}}(),s=function(){var e=Object(y.a)(O.a.mark((function e(a){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("tarea",a),e.next=4,Y.post("/api/tareas",a);case 4:t=e.sent,console.log("resultado",t),o({type:"AGREGAR_TAREA",payload:a}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(a){return e.apply(this,arguments)}}(),u=function(){var e=Object(y.a)(O.a.mark((function e(a,t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("eliminar tarea"),e.prev=1,e.next=4,Y.delete("/api/tareas/".concat(a),{params:{proyecto:t}});case 4:o({type:"ELIMINAR_TAREA",payload:a}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(a,t){return e.apply(this,arguments)}}(),i=function(){var e=Object(y.a)(O.a.mark((function e(a){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y.put("/api/tareas/".concat(a._id),a);case 3:t=e.sent,console.log(t),o({type:"ACTUALIZAR_TAREA",payload:t.data.tarea}),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a){return e.apply(this,arguments)}}();return n.a.createElement(_.Provider,{value:{tareasproyecto:c.tareasproyecto,errortarea:c.errortarea,tareaseleccionada:c.tareaseleccionada,obtenerTareas:l,agregarTarea:s,validarTarea:function(){o({type:"VALIDAR_TAREA"})},eliminarTarea:u,guardarTareaActual:function(e){o({type:"TAREA_ACTUAL",payload:e})},actualizarTarea:i,limpiarTarea:function(){o({type:"LIMPIAR_TAREA"})}}},e.children)},B=function(e,a){switch(a.type){case"MOSTRAR_ALERTA":return{alerta:a.payload};case"OCULTAR_ALERTA":return{alerta:null};default:return e}},H=function(e){var a=Object(r.useReducer)(B,{alerta:null}),t=Object(m.a)(a,2),c=t[0],o=t[1];return n.a.createElement(p.Provider,{value:{alerta:c.alerta,mostrarAlerta:function(e,a){o({type:"MOSTRAR_ALERTA",payload:{msg:e,categoria:a}}),setTimeout((function(){o({type:"OCULTAR_ALERTA"})}),5e3)}}},e.children)},K=function(e,a){switch(a.type){case"REGISTRO_EXITOSO":case"LOGIN_EXISTOSO":return localStorage.setItem("token",a.payload.token),Object(i.a)(Object(i.a)({},e),{},{autenticado:!0,mensaje:null,cargando:!1});case"OBTENER_USUARIO":return Object(i.a)(Object(i.a)({},e),{},{usuario:a.payload.usuario,autenticado:!0,cargando:!1});case"CERRAR_SESION":case"LOGIN_ERROR":case"REGISTRO_ERROR":return localStorage.removeItem("token"),Object(i.a)(Object(i.a)({},e),{},{token:null,usuario:null,autenticado:null,mensaje:a.payload,cargando:!1});default:return e}},V=function(e){e?Y.defaults.headers.common["x-auth-token"]=e:delete Y.defaults.headers.common["x-auth-token"]},q=function(e){var a={token:localStorage.getItem("token"),autenticado:null,usuario:null,mensaje:null,cargando:!0},t=Object(r.useReducer)(K,a),c=Object(m.a)(t,2),o=c[0],l=c[1],s=function(){var e=Object(y.a)(O.a.mark((function e(a){var t,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y.post("/api/usuarios",a);case 3:t=e.sent,l({type:"REGISTRO_EXITOSO",payload:t.data}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),r={msg:e.t0.response.data.msg,categoria:"alerta-error"},l({type:"REGISTRO_ERROR",payload:r});case 11:u();case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(a){return e.apply(this,arguments)}}(),u=function(){var e=Object(y.a)(O.a.mark((function e(){var a,t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=localStorage.getItem("token"))&&V(a),e.prev=2,e.next=5,Y.get("/api/auth");case 5:t=e.sent,l({type:"OBTENER_USUARIO",payload:t.data}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),l({type:"LOGIN_ERROR"});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(y.a)(O.a.mark((function e(a){var t,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y.post("/api/auth",a);case 3:t=e.sent,l({type:"LOGIN_EXISTOSO",payload:t.data}),u(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),r={msg:e.t0.response.data.msg,categoria:"alerta-error"},l({type:"LOGIN_ERROR",payload:r});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a){return e.apply(this,arguments)}}();return n.a.createElement(d.Provider,{value:{token:o.token,autenticado:o.autenticado,usuario:o.usuario,mensaje:o.mensaje,cargando:o.cargando,registrarUsuario:s,iniciarSesion:i,usuarioAutenticado:u,cerrarSesion:function(){l({type:"CERRAR_SESION"})}}},e.children)},X=t(38),z=function(e){var a=e.component,t=Object(X.a)(e,["component"]),c=Object(r.useContext)(d),o=c.autenticado,l=c.cargando,u=c.usuarioAutenticado;return Object(r.useEffect)((function(){u()}),[]),n.a.createElement(s.b,Object.assign({},t,{render:function(e){return o||l?n.a.createElement(a,e):n.a.createElement(s.a,{to:"/"})}}))},J=localStorage.getItem("token");J&&V(J);var Z=function(){return console.log(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_BACKEND_URL),n.a.createElement(G,null,n.a.createElement(W,null,n.a.createElement(H,null,n.a.createElement(q,null,n.a.createElement(l.a,null,n.a.createElement(s.d,null,n.a.createElement(s.b,{exact:!0,path:"/",component:b}),n.a.createElement(s.b,{exact:!0,path:"/nueva-cuenta",component:f}),n.a.createElement(z,{exact:!0,path:"/proyectos",component:U})))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(Z,null),","),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[41,1,2]]]);
//# sourceMappingURL=main.31b5067e.chunk.js.map